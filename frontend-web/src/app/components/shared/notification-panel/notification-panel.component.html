<div class="notification-panel">
  <div class="panel-header">
    <h3>Notifications</h3>
    <button class="close-btn" (click)="closePanel()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>

  @if (unreadCount > 0) {
    <div class="panel-actions">
      <button class="action-btn" (click)="markAllAsRead()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
        Tout marquer comme lu
      </button>
    </div>
  }

  <div class="notifications-list">
    @if (notifications.length === 0) {
      <div class="empty-state">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
        <p>Aucune notification</p>
      </div>
    }

    @for (notification of notifications; track notification.id) {
      <div 
        class="notification-item" 
        [class.unread]="!notification.read"
        [class.success]="notification.type === 'success'"
        [class.error]="notification.type === 'error'"
        [class.warning]="notification.type === 'warning'"
        [class.info]="notification.type === 'info'"
        (click)="markAsRead(notification)">
        <div class="notification-icon">
          @if (notification.type === 'success') {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
          } @else if (notification.type === 'error') {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
          } @else if (notification.type === 'warning') {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          } @else {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
          }
        </div>
        <div class="notification-content">
          <div class="notification-header">
            <h4>{{ notification.title }}</h4>
            <span class="notification-time">{{ getTimeAgo(notification.timestamp) }}</span>
          </div>
          <p>{{ notification.message }}</p>
        </div>
        <button class="remove-btn" (click)="removeNotification(notification, $event)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
        @if (!notification.read) {
          <span class="unread-dot"></span>
        }
      </div>
    }
  </div>

  @if (notifications.length > 0) {
    <div class="panel-footer">
      <button class="clear-all-btn" (click)="clearAll()">
        Tout effacer
      </button>
    </div>
  }
</div>
